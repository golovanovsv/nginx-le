# About
Интегрированный в nginx letsencrypt для быстрого запуска SSL одним контейнером. Выполняет автоматическое обновление сертификатов. Автоматическое обновление раз в 7 дней после запуска. Изменяется в Dockerfil`е.
Если хотите что-то более автоматизированное с поддержкой автоматического добавления новых сертификатов с новыми контейнерами посмотрите решения с компаньонами типа [такого](https://github.com/JrCs/docker-letsencrypt-nginx-proxy-companion).

# Settings
Для запуска вам понадобиться определить следующие обязательные переменные для контейнера:

LETSENCRYPT с любым содержимым. Если переменная определена то letsencrypt включается и получает и обновляет сертификаты.

LE_FQDN должен содержать список имен для которых нужно выпустить сертификат. Через запятую.

LE_EMAIL должен содержать адрес электронной почты для напоминаний.

Так же существуют следующие не обязательные переменные:

TZ - временная зона. По умолчанию Europe/Moscow

ACME_LOCATION - директория, куда отправлять запросы acme challenge. По умолчанию /etc/letsencrypt/acme

# How to run
Для запуска необходимо:
- монтирование каталога /etc/nginx/conf.d контейнера в каталог хоста, содержащий конфигурационные файлы хостов nginx`а. Обязательное расширение конфигурационных файлов *.conf
- для каждого конфига nginx должен быть опреден location /.well-known/ указывающий на директорию ACME_LOCATION
- для каждого конфига nginx параметр ssl_dhparam должен ссылаться на /etc/nginx/ssl/dhparams.pem

Пример:
```bash
bash$ docker run -d \
        --name nginx-example \
        --env "LETSENCRYPT=enabled" \
        --env "LE_FQDN=jira.example.com,wiki.example.com" \
        --env "LE_EMAIL=devops@example.com" \
        -v <path to nginx configs>:/etc/nginx/conf.d \
        -p 80:80 \
        -p 443:443 \
      golovanovsv/nginx-le
```